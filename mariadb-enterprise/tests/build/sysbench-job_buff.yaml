apiVersion: v1
kind: Pod
metadata:
  name: buff-test-sysbench-test
spec:
  restartPolicy: Never
  containers:
  - image: gcr.io/dbaas-development/mariadb-test:0.0.5
    imagePullPolicy: Always
    name: main
    command: ["/bin/bash", "./run-sysbench.sh"]
    env:
    - name: MARIADB_USER
      valueFrom:
        secretKeyRef:
          name: buff-test-mariadb-secret
          key: admin-username
    - name: MARIADB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: buff-test-mariadb-secret
          key: admin-password
    - name: MARIADB_HOST
      value: buff-test-mariadb
    - name: SYSBENCH_THREADS
      value: "16"
    - name: SYSBENCH_NUMBER_OF_TABLES
      value: "20"
    - name: SYSBENCH_TABLE_SIZE
      value: "100000"
    - name: SYSBENCH_TIME
      value: "3600"
    - name: SYSBENCH_DELETE_INSERTS
      value: "1"